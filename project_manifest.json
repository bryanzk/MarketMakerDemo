{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "version": "2.0.0",
  "project": {
    "name": "MarketMakerDemo",
    "description": "Agent-first market making system / é¢å‘ Agent çš„åšå¸‚ç³»ç»Ÿ",
    "language": "Python 3.11+",
    "framework": "FastAPI + Binance API",
    "documentation_entry": "README.md"
  },
  "modules": [
    {
      "id": "shared",
      "name": "Shared Platform / å…±äº«å¹³å°",
      "owner_agent": "Agent ARCH",
      "source_dir": "src/shared/",
      "test_dir": null,
      "module_card": "docs/modules/shared.json",
      "feature_source": "docs/modules/shared.json#/features",
      "forbidden_responsibilities": [
        "Business-specific trading logic",
        "Portfolio capital allocation"
      ]
    },
    {
      "id": "trading",
      "name": "Trading Engine / äº¤æ˜“å¼•æ“",
      "owner_agent": "Agent TRADING",
      "source_dir": "src/trading/",
      "test_dir": "tests/unit/trading/",
      "module_card": "docs/modules/trading.json",
      "feature_source": "docs/modules/trading.json#/features",
      "dependencies": ["shared"],
      "contracts": ["contracts/trading.json"]
    },
    {
      "id": "portfolio",
      "name": "Portfolio & Risk / ç»„åˆä¸é£é™©",
      "owner_agent": "Agent PORTFOLIO",
      "source_dir": "src/portfolio/",
      "test_dir": "tests/unit/portfolio/",
      "module_card": "docs/modules/portfolio.json",
      "feature_source": "docs/modules/portfolio.json#/features",
      "dependencies": ["shared", "trading"],
      "contracts": ["contracts/portfolio.json"]
    },
    {
      "id": "ai",
      "name": "AI & Evaluation / AI è¯„ä¼°å±‚",
      "owner_agent": "Agent AI",
      "source_dir": "src/ai/",
      "test_dir": "tests/unit/ai/",
      "module_card": "docs/modules/ai.json",
      "feature_source": "docs/modules/ai.json#/features",
      "dependencies": ["shared", "trading"],
      "contracts": ["contracts/ai.json"]
    },
    {
      "id": "web",
      "name": "Web & API / Web ä¸ API",
      "owner_agent": "Agent WEB",
      "source_dir": "src/web/",
      "test_dir": "tests/unit/web/",
      "module_card": "docs/modules/web.json",
      "feature_source": "docs/modules/web.json#/features",
      "dependencies": ["trading", "portfolio", "ai"],
      "contracts": ["contracts/web.json"]
    },
    {
      "id": "qa",
      "name": "Quality & Docs / è´¨é‡ä¸æ–‡æ¡£",
      "owner_agent": "Agent QA",
      "source_dir": null,
      "test_dir": "tests/",
      "module_card": "docs/modules/qa.json",
      "feature_source": "docs/modules/qa.json#/features",
      "dependencies": ["trading", "portfolio", "web", "ai"],
      "contracts": null
    }
  ],
  "governance": {
    "management_json": "docs/progress/progress_index.json",
    "audit_script": "scripts/audit_check.py",
    "status_registry": "status/roadmap.json",
    "agent_requests": "status/agent_requests.json",
    "readonly_policy": "Only Agent PM may edit manifest and progress JSON / ä»… Agent PM å¯ä¿®æ”¹ manifest ä¸ progress JSON"
  },
  "pipeline": {
    "description": "17-step pipeline with JSON checkpoints and 2 human approval gates / åŸºäº JSON çš„ 17 æ­¥æµç¨‹ï¼ŒåŒ…å« 2 ä¸ªäººå·¥æ‰¹å‡†é—¨ç¦",
    "phases": [
      {"phase": 1, "name": "Plan", "steps": [1, 2, 3, 4], "description": "éœ€æ±‚å®šä¹‰å’Œæ‰¹å‡† / Requirements definition and approval"},
      {"phase": 2, "name": "Design", "steps": [5], "description": "æ¥å£å¥‘çº¦å®šä¹‰ / Interface contract definition"},
      {"phase": 3, "name": "Dev", "steps": [6, 7], "description": "æµ‹è¯•é©±åŠ¨å¼€å‘ / Test-driven development"},
      {"phase": 4, "name": "Quality", "steps": [8, 9], "description": "ä»£ç æ ¼å¼æ£€æŸ¥å’Œå®‰å…¨æ£€æŸ¥ / Code formatting and security check"},
      {"phase": 5, "name": "Review", "steps": [10], "description": "ä»£ç å®¡æŸ¥ / Code review"},
      {"phase": 6, "name": "Test", "steps": [11, 12, 13], "description": "å•å…ƒæµ‹è¯•ã€å†’çƒŸæµ‹è¯•ã€é›†æˆæµ‹è¯• / Unit, smoke, and integration tests"},
      {"phase": 7, "name": "Docs & Ops", "steps": [14, 15, 16, 17], "description": "æ–‡æ¡£æ›´æ–°ã€è¿›åº¦è®°å½•ã€CI/CD æ£€æŸ¥ã€å‘å¸ƒæ‰¹å‡† / Documentation, progress logging, CI/CD checks, release approval"}
    ],
    "steps": [
      {"step": 1, "phase": "Plan", "field": "spec_defined", "agent": "Agent PO", "artifact": "docs/specs/{module}/{feature}.md"},
      {"step": 2, "phase": "Plan", "field": "story_defined", "agent": "Agent PO", "artifact": "docs/stories/{module}/US-{ID}.md"},
      {"step": 3, "phase": "Plan", "field": "ac_defined", "agent": "Agent PO", "artifact": "Acceptance criteria inside story / ç”¨æˆ·æ•…äº‹å†…çš„éªŒæ”¶æ ‡å‡†"},
      {"step": 4, "phase": "Plan", "field": "plan_approved", "agent": "Human", "artifact": "ğŸ›‘ STOP GATE - ç­‰å¾…æ‰¹å‡† / Approval gate", "is_gate": true},
      {"step": 5, "phase": "Design", "field": "contract_defined", "agent": "Agent ARCH", "artifact": "contracts/{module}.json"},
      {"step": 6, "phase": "Dev", "field": "unit_test_written", "agent": "Dev Agent (æŒ‰ owner)", "artifact": "tests/unit/{module}/test_{feature}.py", "notes": "TDD: Red"},
      {"step": 7, "phase": "Dev", "field": "code_implemented", "agent": "Dev Agent (æŒ‰ owner)", "artifact": "src/{module}/...", "notes": "TDD: Green"},
      {"step": 8, "phase": "Quality", "field": "lint_passed", "agent": "Dev Agent + Tool", "artifact": "Linter æŠ¥å‘Š / Linter report"},
      {"step": 9, "phase": "Quality", "field": "security_check_passed", "agent": "Dev Agent + Tool", "artifact": "å®‰å…¨æ‰«ææŠ¥å‘Š / Security scan report"},
      {"step": 10, "phase": "Review", "field": "code_reviewed", "agent": "Agent REVIEW", "artifact": "logs/reviews/{feature_id}.json"},
      {"step": 11, "phase": "Test", "field": "unit_test_passed", "agent": "Dev Agent (æŒ‰ owner)", "artifact": "pytest æŠ¥å‘Š / pytest reports"},
      {"step": 12, "phase": "Test", "field": "smoke_test_passed", "agent": "Agent QA", "artifact": "å†’çƒŸæµ‹è¯•æŠ¥å‘Š / Smoke test reports"},
      {"step": 13, "phase": "Test", "field": "integration_passed", "agent": "Agent QA", "artifact": "é›†æˆæµ‹è¯•æŠ¥å‘Š / Integration test reports"},
      {"step": 14, "phase": "Docs & Ops", "field": "docs_updated", "agent": "Agent QA", "artifact": "docs/user_guide/{module}/..."},
      {"step": 15, "phase": "Docs & Ops", "field": "progress_logged", "agent": "Agent PM", "artifact": "status/roadmap.json"},
      {"step": 16, "phase": "Docs & Ops", "field": "ci_cd_passed", "agent": "Automated", "artifact": "GitHub Actions ç»“æœ / GitHub Actions results"},
      {"step": 17, "phase": "Docs & Ops", "field": "release_approved", "agent": "Human", "artifact": "ğŸ›‘ STOP GATE - ç­‰å¾…å‘å¸ƒæ‰¹å‡† / Release approval gate", "is_gate": true}
    ]
  },
  "naming_conventions": {
    "module_id": "Use lowercase identifiers (e.g., trading, ai)",
    "feature_id": "{CATEGORY}-{NUMBER} (e.g., CORE-001, API-002)",
    "user_story_id": "US-{CATEGORY}-{NUMBER} (e.g., US-CORE-001)",
    "event_id": "E-YYYY-NNNN for progress events",
    "branch": "feat/{US-ID}-{short_slug} or feature/{feature_id}-{slug}",
    "branch_note": "Git automation uses feat/{US-ID}-{short_slug} format",
    "commit": "<type>(<scope>): <description> (ref #{US-ID})",
    "commit_types": ["feat", "fix", "docs", "refactor", "test", "chore", "spec", "story", "contract", "review", "progress"],
    "commit_scopes": ["trading", "portfolio", "web", "ai", "shared", "progress"]
  },
  "readonly": true,
  "last_updated": "2025-12-01",
  "maintained_by": "Agent PM",
  "version_notes": "Updated to 17-step pipeline with 2 human approval gates, aligned with .cursorrules"
}



