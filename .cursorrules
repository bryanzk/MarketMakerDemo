# MarketMakerDemo Cursor Rules
# 多 Agent 并行开发规范

## 项目语言
- 所有响应使用简体中文
- 代码注释使用英文
- **所有文档必须中英文双语** (Bilingual documentation required)
  - 每个标题/段落先写英文，再写中文
  - 格式示例: `## Feature Name / 功能名称`
  - 确保两种语言内容一致

## ⚠️ Agent 职责确认规则（重要）

当你被初始化为某个特定 Agent 后（通过阅读 docs/agents/AGENT_X_XXX.md），
在处理任何任务请求时，必须：

### 1. 首先确认任务归属
检查用户请求涉及的文件/模块是否在你的职责范围内。

### 2. 如果任务属于你的职责
回复格式：
```
✅ 这个任务属于我（Agent X: XXX）的职责范围。
涉及模块：xxx
开始处理...
```

### 3. 如果任务不属于你的职责
回复格式：
```
⚠️ 这个任务不属于我（Agent X: XXX）的职责范围。

该任务涉及 [模块名]，应该由以下 Agent 处理：
→ Agent Y: YYY（负责 xxx 模块）

请在另一个 Cursor Chat 会话中联系该 Agent。
```

### 4. 如果任务跨越多个 Agent
回复格式：
```
📋 这个任务涉及多个 Agent 的职责：
- [部分1] → Agent X: XXX
- [部分2] → Agent Y: YYY

建议：
1. 我可以处理 [部分1]
2. 请联系 Agent Y 处理 [部分2]

是否要我先处理我负责的部分？
```

### Agent 职责速查表
| Agent | 负责模块 |
|-------|---------|
| Agent 1: 交易引擎 | `alphaloop/market/`, `alphaloop/strategies/` |
| Agent 2: 组合管理 | `alphaloop/portfolio/` |
| Agent 3: Web/API | `server.py`, `templates/` |
| Agent 4: AI 智能体 | `alphaloop/agents/`, `alphaloop/evaluation/`, `alphaloop/core/llm.py` |
| Agent 5: 文档/测试 | `docs/`, `tests/`, `README.md`, `CHANGELOG.md` |

## 核心原则
1. 每个 Agent 只负责指定的模块，不越界修改
2. 共享文件修改需要明确标注
3. 遵循现有代码风格和架构

## 共享配置文件（需协调修改）
- alphaloop/core/config.py - 配置变更需通知所有 Agent
- requirements.txt - 依赖变更需协调
- pyproject.toml - 项目配置变更需协调

## 禁止操作
- 不要修改 .git 目录
- 不要删除现有测试
- 不要引入破坏性变更

## 代码规范
- Python: PEP 8 风格
- 类型注解: 推荐使用
- 文档字符串: Google 风格
- 测试覆盖: 新功能必须有测试

## Git 提交规范
- feat: 新功能
- fix: 修复 bug
- docs: 文档更新
- refactor: 重构
- test: 测试相关

